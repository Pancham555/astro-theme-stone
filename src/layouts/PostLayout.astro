---
import Layout from "../layouts/Layout.astro";
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";

type Props = {
  post: any;
  Content: any;
};

const { post, Content } = Astro.props;
const dateFormatted = post.data.date
  ? new Date(post.data.date).toLocaleDateString("en-US", {
      year: "numeric",
      month: "long",
      day: "numeric",
    })
  : null;
---

<Layout title={post.data.title} description={post.data.description}>
  <!-- Outer Section -->
  <section class="py-16 sm:py-20">
    <div class="mx-auto max-w-2xl px-4 sm:px-6 lg:max-w-7xl lg:px-8 items-center">
      <!-- Title & Description -->
      <h1 class="text-4xl text-center font-medium tracking-tight sm:text-5xl lg:text-6xl">
        {post.data.title}
      </h1>

      {post.data.description && (
        <p class="mx-auto mt-6 max-w-2xl text-center text-lg text-primary-950/70 dark:text-primary-200/70">
          <em>{post.data.description}</em>
        </p>
      )}

      {dateFormatted && (
        <p class="mt-3 text-sm mx-auto text-center text-primary-950/60 dark:text-primary-200/60">
          Published on {dateFormatted}
        </p>
      )}
    </div>

    <!-- Featured Image (with full reference margins/padding) -->
    {post.data.image && (
      <div class="mt-12 sm:mt-16 mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 flex justify-center">
        <img
          src={post.data.image}
          alt={`Featured image for ${post.data.title}`}
          class="aspect-[2/1] w-full rounded-3xl object-cover"
          loading="lazy"
        />
      </div>
    )}

    <!-- Post Content (unchanged narrower container) -->
    <div class="mx-auto mt-16 max-w-3xl px-4 sm:px-6 lg:px-8">
      <article class="prose dark:prose-invert prose-lg max-w-none">
        <Content />
      </article>
    </div>

    <!-- Share Section -->
    <div class="mx-auto mt-20 flex max-w-3xl items-center justify-center gap-6 text-primary-950/70 dark:text-primary-200/70">
      <a
        href={`https://twitter.com/intent/tweet?text=${encodeURIComponent(
          post.data.title
        )}&url=${Astro.url}`}
        target="_blank"
        rel="noopener noreferrer"
        class="hover:text-sky-500 transition-colors"
      >
        <Icon name="mdi:twitter" class="h-6 w-6" />
      </a>
      <a
        href={`https://www.facebook.com/sharer/sharer.php?u=${Astro.url}`}
        target="_blank"
        rel="noopener noreferrer"
        class="hover:text-blue-600 transition-colors"
      >
        <Icon name="mdi:facebook" class="h-6 w-6" />
      </a>
      <a
        href={`https://www.linkedin.com/shareArticle?url=${Astro.url}&title=${encodeURIComponent(
          post.data.title
        )}`}
        target="_blank"
        rel="noopener noreferrer"
        class="hover:text-blue-700 transition-colors"
      >
        <Icon name="mdi:linkedin" class="h-6 w-6" />
      </a>
    </div>
  </section>
</Layout>

